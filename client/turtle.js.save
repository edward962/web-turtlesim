var coinImage = new Image();
coinImage.src = "box-turtle.png";

function sprite (options) {
    
    var that = {};
          
    that.context = options.context;
    that.width = options.width;
    that.height = options.height;
    that.image = options.image;
    that.positionX = options.positionX;
    that.positionY = options.positionY;

    that.render = function () {
    that.context.clearRect(0, 0, that.width, that.height);
    // Draw the animation
    that.context.drawImage(
      that.image,
      0,
      0,
      that.width,
      that.height,
      that.positionX,
      that.positionY,
      that.width,
      that.height);
    };
    return that;
}
var canvas = document.getElementById("turtle-sim");
canvas.width = 100;
canvas.height = 100;

var coin = sprite({
    context: canvas.getContext("2d"),
    width: 100,
    height: 100,
    positionX: 0,
    positionY: 0,
    image: coinImage
});
coin.render();


$(function () {
  var socket = io();
  socket.on('position', function(msg){
    var array = msg.split(",");
    var X = parseInt(array[0]);
    var Y = parseInt(array[1]);
    console.log(array);
    var coin = sprite({
      context: canvas.getContext("2d"),
      width: 100,
      height: 100,
      positionX: X,
      positionY: Y,
      image: coinImage
    });

    coin.render();
  });

});
